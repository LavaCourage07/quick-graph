# 智能图表生成器

一个基于Vue3和Vueflow的智能图表生成工具，能够实现"文本—草图—成品图"的逐步生成过程。

## 功能特点

### 第一步：文本识别
- 用户输入业务描述文本
- 利用Kimi K2大模型智能识别文本中的节点和关系
- 自动生成Mermaid格式的图表结构
- 转换为Vueflow可用的JSON数据格式

### 第二步：草图概览
- 基于Vueflow框架的可视化画布
- 支持节点的拖拽、编辑、删除操作
- 支持连线的创建、编辑、删除操作
- 实时预览图表结构

### 第三步：正式图纸
- 基于草图数据生成正式图表
- 自动优化节点布局
- 支持节点和边的信息完善（调用大模型）
- 提供节点列表和边列表面板
- 支持批量信息完善

## 技术栈

- **前端框架**: Vue 3 (Composition API)
- **图表框架**: Vueflow
- **构建工具**: Vite
- **AI模型**: Kimi K2 (Moonshot)
- **样式**: CSS3

## 安装和运行

1. 安装依赖：
```bash
npm install
```

2. 启动开发服务器：
```bash
npm run dev
```

3. 构建生产版本：
```bash
npm run build
```

## 使用说明

### 基本流程

1. **输入文本**: 在第一步中输入您的业务描述，例如：
   ```
   锅炉通过管道向换热器输送蒸汽，换热器将热量传递给冷却水，冷却水通过泵循环流动
   ```

2. **生成草图**: 点击"智能生成草图"按钮，系统会自动分析文本并生成初始图表

3. **编辑草图**: 在草图概览阶段，您可以：
   - 拖拽节点调整位置
   - 双击节点或连线编辑标签
   - 使用工具栏添加新节点或连线
   - 删除不需要的元素

4. **生成正式图**: 点击"智能创建正式图"按钮，系统会：
   - 优化节点布局
   - 复制草图数据到正式图
   - 跳转到正式图纸阶段

5. **完善信息**: 在正式图纸阶段，您可以：
   - 查看节点和边列表
   - 点击"完善信息"按钮为单个元素添加详细信息
   - 使用"批量完善"功能一次性完善所有元素
   - 导出图表数据

### 操作说明

- **节点操作**: 拖拽移动、双击编辑、右键删除
- **连线操作**: 从节点拖拽创建连线、双击编辑标签
- **工具栏**: 提供快速添加节点和连线的功能
- **面板**: 右侧面板显示节点和边的详细信息

## 项目结构

```
src/
├── api/
│   └── kimi.js          # Kimi API调用模块
├── components/
│   ├── TextRecognition.vue  # 文本识别组件
│   ├── SketchCanvas.vue     # 草图画布组件
│   └── FinalCanvas.vue      # 正式图画布组件
├── App.vue              # 主应用组件
├── main.js              # 应用入口
└── style.css            # 全局样式
```

## API配置

项目使用Kimi K2模型进行文本分析和信息完善。API密钥已配置在 `src/api/kimi.js` 文件中。

## 导出功能

- **草图导出**: 导出JSON格式的草图数据
- **正式图导出**: 导出JSON格式的完整图表数据

## 注意事项

1. 确保网络连接正常，以便调用Kimi API
2. 文本描述越详细，生成的图表越准确
3. 可以在草图阶段进行充分的编辑和调整
4. 正式图阶段的信息完善功能需要网络连接

## 开发说明

- 使用Vue 3 Composition API
- 采用响应式数据管理
- 组件间通过props和emit通信
- 样式采用CSS3，支持响应式设计

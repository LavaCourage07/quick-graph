# 子图高亮功能实现计划

- [x] 1. 设置项目基础结构和状态管理
  - 在FinalCanvas.vue中添加子图搜索相关的响应式状态变量
  - 创建子图搜索状态对象(subgraphSearchState)和高亮状态对象(highlightState)
  - 添加子图统计信息状态管理
  - _需求: 1.1, 2.1, 3.1_

- [x] 2. 实现子图计算核心算法
  - 创建calculateSubgraph函数，实现根据选中节点计算直接关联的子图
  - 实现图关系分析逻辑，找出所有与选中节点直接相连的节点和边
  - 添加边界情况处理（孤立节点、空图表等）
  - 编写子图计算算法的单元测试
  - _需求: 2.2, 2.3, 2.4_

- [x] 3. 创建双搜索框界面布局
  - 修改现有搜索容器，支持垂直排列的双搜索框布局
  - 保持原有节点搜索框功能不变，添加"搜索节点（本体）"标签
  - 添加新的子图搜索框，标签为"子图高亮搜索"
  - 为两个搜索框创建独立的结果显示区域
  - 添加适当的CSS样式确保界面美观和功能区分
  - _需求: 1.1, 1.2, 1.3_

- [x] 4. 实现子图搜索功能
  - 创建performSubgraphSearch函数，实现子图搜索的节点匹配逻辑
  - 实现搜索结果的实时显示和更新
  - 添加搜索输入处理和防抖机制
  - 实现搜索结果为空时的提示信息显示
  - _需求: 1.4, 1.5, 2.1_

- [x] 5. 实现节点选择和子图激活
  - 创建selectNodeForSubgraph函数，处理用户点击搜索结果中的节点
  - 实现节点选择后的子图计算调用
  - 添加子图激活状态的管理和更新
  - 实现子图统计信息的计算和显示
  - _需求: 2.2, 2.3, 2.4, 2.5_

- [x] 6. 实现子图高亮视觉效果
  - 扩展节点数据模型，添加subgraphHighlighted和dimmed属性
  - 扩展边数据模型，添加子图高亮相关属性
  - 创建applySubgraphHighlight函数，实现子图元素的高亮效果
  - 实现非子图元素的淡化效果（透明度降低）
  - _需求: 3.1, 3.2, 3.3, 3.4_

- [x] 7. 更新节点和边组件支持子图高亮
  - 修改CustomNode.vue和RectNode.vue，添加子图高亮样式支持
  - 修改CustomEdge.vue，添加边的子图高亮样式支持
  - 实现子图高亮的CSS动画效果（如蓝色脉冲动画）
  - 实现淡化效果的CSS样式
  - _需求: 3.1, 3.2, 3.3_

- [x] 8. 实现整体概览功能
  - 创建returnToOverview函数，实现回到整体概览的功能
  - 实现所有高亮状态的清除逻辑
  - 使用VueFlow的fitView方法实现图表适应画布居中
  - 添加"回到整体概览"按钮，仅在子图高亮激活时显示
  - _需求: 4.1, 4.2, 4.3, 4.4, 4.5, 4.6_

- [x] 9. 实现搜索功能状态管理和冲突处理
  - 创建clearAllHighlights函数，统一管理所有高亮状态的清除
  - 实现原有节点搜索与子图搜索的状态冲突处理
  - 确保两个搜索功能能够独立工作且互不干扰
  - 实现搜索状态的正确切换和重置
  - _需求: 5.1, 5.2, 5.3, 5.4, 5.5_

- [x] 10. 添加子图统计信息显示
  - 创建子图统计信息的显示组件或区域
  - 实现"已选中X个节点，Y条边"的统计信息显示
  - 添加子图中心节点的特殊标识
  - 实现统计信息的实时更新
  - _需求: 6.5_

- [x] 11. 实现性能优化和错误处理
  - 添加大图表（>50个元素）的性能警告机制
  - 实现搜索防抖，避免频繁计算
  - 添加空图表和孤立节点的特殊处理
  - 实现错误边界和异常情况的用户友好提示
  - _需求: 6.3, 6.4_

- [x] 12. 添加用户体验优化
  - 实现搜索响应时间优化（<500ms）
  - 添加高亮切换的平滑动画效果（<200ms）
  - 实现hover效果的额外视觉反馈
  - 添加适当的加载指示器和状态反馈
  - _需求: 6.1, 6.2, 6.6_

- [x] 13. 编写组件测试
  - 为子图计算算法编写单元测试
  - 为搜索功能编写功能测试
  - 为高亮状态管理编写测试
  - 测试边界情况和错误处理逻辑
  - _需求: 所有需求的测试覆盖_

- [ ] 14. 集成测试和调试
  - 测试完整的用户交互流程（搜索→选择→高亮→概览）
  - 测试与现有功能的兼容性
  - 进行性能测试和内存使用测试
  - 修复发现的bug和优化用户体验
  - _需求: 所有需求的集成验证_

- [x] 15. 文档更新和代码清理
  - 更新组件文档和注释
  - 清理调试代码和console.log语句
  - 优化代码结构和可读性
  - 确保代码符合项目的编码规范
  - _需求: 代码质量和维护性_